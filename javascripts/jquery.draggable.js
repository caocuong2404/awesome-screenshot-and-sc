jQuery.Draggable=function(e,n){var a=jQuery,r=!1;(e=this.ele=a(e))[0]._draggable&&e[0]._draggable.destroy(),e[0]._draggable=this;var o,t,u=this.options=a.extend({handle:"",cursor:"move",axis:"",for:"camera",onDrag:function(){return!0},beforeDrag:function(){},afterDrag:function(){}},n||{});function s(e){return r=!1,a(document).bind("mousemove",i).bind("mouseup",d),o=e.pageX,t=e.pageY,!1}function i(n){if(r||u.beforeDrag(n),!n.undraggable){r=!0;var a=parseInt(e.offset().left),s=parseInt(e.css("top")),i=n.pageX-o,d=n.pageY-t;if("y"==u.axis?i=0:"x"==u.axis&&(d=0),"camera"===u.for){var f=document.documentElement,g=e.width(),c=e.height(),l=f.offsetWidth,h=f.clientHeight,m=f.offsetLeft,p=f.offsetTop;(b=a+i)+g>m+l&&(b=m+l-g),b<m&&(b=m),(v=s+d)+c>p+h&&(v=p+h-c),v<p&&(v=p)}else var b=a+i,v=s+d;return e.css({left:b,top:v}),u.onDrag(a,s,i,d),o=n.pageX,t=n.pageY,!1}}function d(e){return a(document).unbind("mousemove",i).unbind("mouseup",d),!r||(u.afterDrag(e),!1)}u.handle=u.handle?a(u.handle,e):e,u.handle.css({cursor:u.cursor}),this.destroy=function(){u.handle.unbind("mousedown",s)},u.handle.bind("mousedown",s)};