var streamOption={};function receiveMessage(e){if("getMic"===e.data.type)getMic((function(e){window.parent.postMessage({type:"audioStream",steam:e},"*")}),(function(){}))}window.addEventListener("message",receiveMessage,!1);var params=new URLSearchParams(window.location.search),what=params.get("what");function showWhat(e){if("mic"===e)var t="microphone";else if("cam"===e)t="camera";document.querySelectorAll(".text").forEach((function(e){e.innerText=t})),document.querySelectorAll("."+e+"-text").forEach((function(e){e.style.display="block"})),document.getElementById(e+"-img").style.display="block"}function getStream(e,t){getAllAudioVideoDevices((function(n){var i=n.audioInputDevices.length>0;n.videoInputDevices.length>0&&(streamOption.video=!0),i&&(streamOption.audio=!0),window.navigator.mediaDevices.getUserMedia(streamOption).then((function(t){e(t)}),(function(e){t(e)}))}))}function init(){getStream((function(e){e&&(e.getTracks().forEach((function(e){e.stop()})),document.getElementById("fail-tip").style.display="none",document.getElementById("success-tip").style.display="block",document.getElementById("cam-img").style.display="none",document.getElementById("cam-img-success").style.display="block")}),(function(e){/Permission denied/.test(e)}))}document.querySelectorAll(".link").forEach((function(e){e.addEventListener("click",(function(){var e=this.getAttribute("data-url");e&&chrome.tabs.update({url:e})}),!1)})),init();