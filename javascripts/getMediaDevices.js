function getAllAudioVideoDevices(e,i){if(!navigator.enumerateDevices&&window.MediaStreamTrack&&window.MediaStreamTrack.getSources&&(navigator.enumerateDevices=window.MediaStreamTrack.getSources.bind(window.MediaStreamTrack)),!navigator.enumerateDevices&&navigator.mediaDevices.enumerateDevices&&(navigator.enumerateDevices=navigator.mediaDevices.enumerateDevices.bind(navigator)),navigator.enumerateDevices){var a=[],n=[],d=[],v=[],t=[],o=[];navigator.enumerateDevices((function(i){i.forEach((function(e){var i,r={};for(var u in e)r[u]=e[u];a.forEach((function(e){e.deviceId===r.deviceId&&(i=!0)})),i||("audio"===r.kind&&(r.kind="audioinput"),"video"===r.kind&&(r.kind="videoinput"),r.deviceId||(r.deviceId=r.id),r.id||(r.id=r.deviceId),"audioinput"!==r.kind&&"audio"!==r.kind||v.push(r),"audiooutput"===r.kind&&t.push(r),"videoinput"!==r.kind&&"video"!==r.kind||o.push(r),-1!==r.kind.indexOf("audio")&&n.push(r),-1!==r.kind.indexOf("video")&&d.push(r),a.push(r))})),e&&e({allMediaDevices:a,allVideoDevices:d,allAudioDevices:n,videoInputDevices:o,audioInputDevices:v,audioOutputDevices:t})}))}else i(null,"Neither navigator.mediaDevices.enumerateDevices NOR MediaStreamTrack.getSources are available.")}navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices&&(navigator.enumerateDevices=function(e){navigator.mediaDevices.enumerateDevices().then(e)});