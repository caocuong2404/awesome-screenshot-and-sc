(()=>{"use strict";var e,t,n,o={59542:(e,t,n)=>{n.d(t,{Tw:()=>St});var o=n(67294),r=n(16165),i=n(94184),a=n.n(i),c=(n(97856),n(71472)),s=n(52425),l=n(19340),u=n(3480),d=n(25737),h=n(18179),p=n(94149),f=n(10467),I=n(553),g=n(45616),y=n(13070),m=n(54058),b=n(63212),v=n(11034),S=n(42461),w=n(72262),Z=n(26344),P=n(10258),k=n(83734),C=n(42715),O=n(92312),T=n(8957),j=n(95013),x=n(74752),R=n(52053),E=n(28737),F=n(47550),_=n(99777),D=n(4842),M=n(63573),B=n(33271),U=n(5649),V=n(49748),z=n(29555),A=n(50377),N=n(13640),W=n(45131),L=n(74886),Q=n(76730),H=n(88816),K=n(3671),$=n(83056),G=n(14573),q=n(78444),J=n(82124),X=n(16040),Y=n(86580),ee=n(9209),te=n(71356),ne=n(50717),oe=n(82145),re=n(62611),ie=n(30824),ae=n(27302),ce=n(49361),se=n(17122),le=n(16215),ue=n(44293),de=n(58399),he=n(43898),pe=n(3068),fe=n(14045),Ie=n(12228),ge=n(89171),ye=n(795),me=n(92562),be=n(58755),ve=n(65470),Se=n(58650),we=n(74987),Ze=n(82027),Pe=n(83375),ke=n(77532),Ce=n(9002),Oe=n(31802),Te=n(69584),je=n(52806),xe=n(44794),Re=n(49476),Ee=n(5654),Fe=n(7672),_e=n(32319),De=n(29947),Me=n(55300),Be=n(83555),Ue=n(62378),Ve=n(32103),ze=n(75627),Ae=n(12371),Ne=n(36148),We=n(43285),Le=n(27307),Qe=n(50779),He=n(8410),Ke=n(59220),$e=n(23594),Ge=n(32878),qe=n(92404),Je=n(14737),Xe=n(84429),Ye=n(52521),et=n(99648),tt=n(33658),nt=n(2557),ot=n(12999),rt=n(3327),it=n(17296),at=n(11389),ct=n(18977),st=n(20937),lt=n(86801),ut=n(1470),dt=n(84297),ht=n(85893);function pt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function ft(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pt(Object(n),!0).forEach((function(t){It(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function It(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gt(e){var t=a()("svg-icon",e.className);return(0,ht.jsx)(r.Z,ft(ft({},e),{},{className:t}))}var yt={AddImageIcon:c.Z,AddIcon:s.Z,AnnotateIcon:l.Z,ArrowIcon:u.Z,CloseIcon:d.Z,CommentIcon:h.Z,CopyLinkIcon:p.Z,CopyIcon:f.Z,DownloadIcon:I.Z,EmbedIcon:g.Z,FeedbackIcon:y.Z,FolderIcon:m.Z,ImagesIcon:b.Z,ItemsIcon:v.Z,LoadingMoreIcon:S.Z,MoreIcon:w.Z,MoveFolderIcon:Z.Z,NotificationIcon:P.Z,OpenFolderIcon:k.Z,PutBackIcon:C.Z,RenameIcon:O.Z,RightIcon:T.Z,TagIcon:j.Z,TrashFilledIcon:x.Z,TrashIcon:R.Z,VideosIcon:E.Z,AddTextIcon:F.Z,CutIcon:_.Z,ProIcon:D.Z,PullIcon:M.Z,ReduceIcon:B.Z,MoreDotIcon:U.Z,PlayIcon:z.Z,PauseIcon:A.Z,FullScreenIcon:N.Z,NormalScreenIcon:W.Z,PIPIcon:L.Z,ReplayIcon:Q.Z,VolumeCloseIcon:H.Z,VolumeHighIcon:K.Z,VolumeLowIcon:$.Z,SharedIcon:G.Z,StepForwardIcon:q.Z,StepBackIcon:J.Z,CommentBubbleIcon:X.Z,MentionMsgIcon:Y.Z,VideoEditorIcon:V.Z,EmojiIcon:ee.Z,RecordDesktopIcon:te.Z,RecordCameraIcon:ne.Z,PricingTagIcon:oe.Z,LightThemeIcon:re.Z,DarkThemeIcon:ie.Z,AutoThemeIcon:ae.Z,NewTabIcon:ce.Z,MicIcon:se.Z,HDIcon:le.Z,CameraIcon:ue.Z,ChromeIcon:de.Z,EdgeIcon:he.Z,GoogleIcon:pe.Z,BrushIcon:fe.Z,SecurityIcon:ge.Z,SyncIcon:Ie.Z,ChannelIcon:ye.Z,SettingIcon:me.Z,MemberIcon:be.Z,PersonIcon:ve.Z,QuestionMarkIcon:Se.Z,CardIcon:we.Z,SharedMeIcon:Ze.Z,MeIcon:Pe.Z,StarIcon:ke.Z,EmptyIcon:Ce.Z,PdfIcon:Oe.Z,PrinterIcon:Te.Z,CopyImageIcon:je.Z,SmileIcon:xe.Z,CrownIcon:Re.Z,CrownBgIcon:Ee.Z,SharedMeFilledIcon:Fe.Z,WarningIcon:_e.Z,BilligIcon:De.Z,StarFolderIcon:Me.Z,MeFilledIcon:Be.Z,AtIcon:Ue.Z,StickerIcon:ee.Z,CameraNoIcon:Ve.Z,TrashRecordIcon:ze.Z,StopRecordIcon:Ae.Z,ActionBigIcon:We.Z,ActionMiniIcon:Ne.Z,CameraRecordIcon:Le.Z,CheckboxIcon:Qe.Z,DragIcon:He.Z,AddMemberIcon:Ke.Z,RecordPauseIcon:$e.Z,RecordPlayIcon:Ge.Z,LockIcon:qe.Z,EnterpriseIcon:Je.Z,DomainIcon:Xe.Z,SsoIcon:Ye.Z,DownloadExtIcon:et.Z,CopyExtIcon:tt.Z,PDFExtIcon:nt.Z,PrintExtIcon:ot.Z,BackupExtIcon:rt.Z,OutIcon:it.Z,ShareIcon:at.Z,DescIcon:ct.Z,FolderFilledIcon:st.Z,VideoFolderIcon:lt.Z,VideoFilmIcon:ut.Z,VideoEditIcon:dt.Z},mt={},bt=function(e){mt[e]=(0,o.memo)((function(t){return(0,ht.jsx)(gt,ft({component:yt[e]},t))})),mt[e].displayName=e};for(var vt in yt)bt(vt);mt.AddImageIcon,mt.AddIcon,mt.AnnotateIcon,mt.ArrowIcon;var St=mt.CloseIcon;mt.CommentIcon,mt.CopyLinkIcon,mt.CopyIcon,mt.DownloadIcon,mt.EmbedIcon,mt.FeedbackIcon,mt.FolderIcon,mt.ImagesIcon,mt.ItemsIcon,mt.LoadingMoreIcon,mt.MoreIcon,mt.MoveFolderIcon,mt.NotificationIcon,mt.OpenFolderIcon,mt.PutBackIcon,mt.RenameIcon,mt.RightIcon,mt.TagIcon,mt.TrashFilledIcon,mt.TrashIcon,mt.VideosIcon,mt.AddTextIcon,mt.CutIcon,mt.ProIcon,mt.PullIcon,mt.ReduceIcon,mt.MoreDotIcon,mt.PlayIcon,mt.PauseIcon,mt.FullScreenIcon,mt.NormalScreenIcon,mt.PIPIcon,mt.ReplayIcon,mt.VolumeCloseIcon,mt.VolumeHighIcon,mt.VolumeLowIcon,mt.SharedIcon,mt.StepForwardIcon,mt.StepBackIcon,mt.CommentBubbleIcon,mt.MentionMsgIcon,mt.VideoEditorIcon,mt.EmojiIcon,mt.RecordDesktopIcon,mt.RecordCameraIcon,mt.PricingTagIcon,mt.LightThemeIcon,mt.DarkThemeIcon,mt.AutoThemeIcon,mt.NewTabIcon,mt.MicIcon,mt.HDIcon,mt.CameraIcon,mt.ChromeIcon,mt.EdgeIcon,mt.GoogleIcon,mt.BrushIcon,mt.SecurityIcon,mt.SyncIcon,mt.ChannelIcon,mt.SettingIcon,mt.MemberIcon,mt.PersonIcon,mt.QuestionMarkIcon,mt.CardIcon,mt.SharedMeIcon,mt.MeIcon,mt.StarIcon,mt.EmptyIcon,mt.PdfIcon,mt.PrinterIcon,mt.CopyImageIcon,mt.SmileIcon,mt.CrownIcon,mt.CrownBgIcon,mt.SharedMeFilledIcon,mt.WarningIcon,mt.BilligIcon,mt.StarFolderIcon,mt.MeFilledIcon,mt.AtIcon,mt.StickerIcon,mt.CameraNoIcon,mt.TrashRecordIcon,mt.StopRecordIcon,mt.ActionBigIcon,mt.ActionMiniIcon,mt.CameraRecordIcon,mt.DragIcon,mt.CheckboxIcon,mt.AddMemberIcon,mt.RecordPauseIcon,mt.RecordPlayIcon,mt.LockIcon,mt.EnterpriseIcon,mt.DomainIcon,mt.SsoIcon,mt.DownloadExtIcon,mt.CopyExtIcon,mt.PDFExtIcon,mt.PrintExtIcon,mt.BackupExtIcon,mt.OutIcon,mt.ShareIcon,mt.DescIcon,mt.FolderFilledIcon,mt.VideoFolderIcon,mt.VideoFilmIcon,mt.VideoEditIcon},45632:(e,t,n)=>{var o=n(67294),r=n(73935),i=n(94184),a=n.n(i),c=["callout","list"],s=n(68910),l=n(16931),u=n(85893);function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function h(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=y(e);if(t){var r=y(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return I(this,n)}}function I(e,t){if(t&&("object"===d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return g(e)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}chrome.extension.getBackgroundPage();var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}(d,e);var t,n,r,i=f(d);function d(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),(t=i.call(this,e)).outerContainer=(0,o.createRef)(),t.container=(0,o.createRef)(),t.doodleCanvas=(0,o.createRef)(),t.layerCanvas=(0,o.createRef)(),t.textareaOut=(0,o.createRef)(),t.textarea=(0,o.createRef)(),t.listDialog=(0,o.createRef)(),t.fileInput=(0,o.createRef)(),t.state={isInCropMode:!1,currentTool:"",currentColor:"rgb(255, 0, 0)",currentPenWidth:4,currentFontSize:32,currentFontFamily:"Times New Roman",cropWidth:0,cropHeight:0,resizeWidth:0,resizeHeight:0,resizeProportional:!0,currentScale:1,canUndo:!1,canRedo:!1,canClear:!1,canDeleteSelected:!0,isShownUpgrade:!1,isReady:!1,upgradeType:"",isTextBackground:!1,isPremium:!1,currentShape:"",changeShape:!1},t.handleFileInputChange=t.handleFileInputChange.bind(g(t)),t.editor_style_callback=t.editor_style_callback.bind(g(t)),t.initEditor=t.initEditor.bind(g(t)),t.insertImage=t.insertImage.bind(g(t)),t.finishEdit=t.finishEdit.bind(g(t)),t.handleKeyDown=t.handleKeyDown.bind(g(t)),t.handleCloseUpgrade=t.handleCloseUpgrade.bind(g(t)),t.handleTextBgChange=t.handleTextBgChange.bind(g(t)),t.handleResetList=t.handleResetList.bind(g(t)),t.getQueryVariable=t.getQueryVariable.bind(g(t)),t}return t=d,n=[{key:"componentDidMount",value:function(){this.initEditor(this.props.imageUrl),document.addEventListener("keydown",this.handleKeyDown),this.props.onRef(this)}},{key:"handleDrawStyle",value:function(e){var t=this;if("undo"===e.type)this.state.isReady&&this.editor.undo();else if("premiumPlan"===e.type)this.setState({isPremium:!e.value});else if("clear"===e.type)this.editor.clear();else if("deleteSelected"===e.type)this.state.isReady&&this.editor.deleteSelected();else if("save"===e.type)if("true"==this.getQueryVariable("incognito")){var n=this.editor.getImageDataURL(this.props.contentType);this.props.handleFinishEdit(e.type,n)}else this.editor.getImageDataBlob(this.props.contentType,(function(n){t.props.handleFinishEdit(e.type,n)}));else if("copy"===e.type)this.editor.getImageDataBlob(this.props.contentType,(function(n){t.props.handleFinishEdit(e.type,n)}));else if("style"===e.type){var o=e.shape,r=e.style;if(this.state.isReady)if(this.state.currentShape.length>0&&this.state.currentShape!==o&&(this.setState({changeShape:!0}),this.editor.unSelectAll()),"insertImage"===o){if(!this.state.isPremium)return void this.setState({upgradeType:"insertImage",isShownUpgrade:!0});r.name&&this.insertImage(r.name)}else if("image"===o){if(!this.state.isPremium)return void this.setState({upgradeType:"image",isShownUpgrade:!0});if(r.name){var i="./images/svg/"+r.name+".svg";this.insertImage(i)}}else{if(!this.state.isPremium&&("callout"==o||"list"==o))return void this.setState({upgradeType:o,isShownUpgrade:!0});if(this.editor.setPenType(o),"rect_blur"!==o){var a=e.changeType;2==a?r.color&&this.editor.setPenColor(r.color):(3==a||r.color&&this.editor.setPenColor(r.color),"text"!==o&&"callout"!==o?r.width&&this.editor.setPenWidth(r.width):r.width&&(this.editor.setFontSize(r.width),this.editor.setPenWidth(4)))}}else{if(!this.state.isPremium&&("callout"==o||"list"==o||"image"==o||"insertImage"==o))return void this.setState({upgradeType:o,isShownUpgrade:!0});"image"!==o&&"insertImage"!==o&&this.setState({currentTool:o}),r.color&&this.setState({currentColor:r.color}),"text"!==o&&"callout"!==o?r.width&&this.setState({currentPenWidth:r.width}):r.width&&this.setState({currentPenWidth:4,currentFontSize:r.width})}}}},{key:"componentDidUpdate",value:function(e){e.imageUrl!==this.props.imageUrl&&""===e.imageUrl&&this.initEditor(this.props.imageUrl)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown),this.editor=null}},{key:"handleKeyDown",value:function(e){var t=e.keyCode;if(-1!==this.props.className.indexOf("active"))if(90===t&&(e.ctrlKey||e.metaKey))e.shiftKey?this.editor.redo():this.editor.undo();else if((46===t||8===t)&&this.state.canDeleteSelected){if(e.target.classList.contains("editor-textarea"))return;this.editor.deleteSelected()}}},{key:"handleCloseUpgrade",value:function(){this.setState({isShownUpgrade:!1});var e=this.getQueryVariable("mark");window.parent.postMessage({type:"closeModel",mark:e,data:"closeModel"},"*")}},{key:"finishEdit",value:function(e,t){}},{key:"handleResetList",value:function(){this.editor.resetList()}},{key:"handleTextBgChange",value:function(){this.editor.setTextBackground(!this.state.isTextBackground),this.setState({isTextBackground:!this.state.isTextBackground})}},{key:"handleResizeProportionChange",value:function(e){this.setState({resizeProportional:e.target.checked})}},{key:"handleResizeInputChange",value:function(e,t){var n=this.editor.bg_info.width/this.editor.bg_info.height;"width"===e?!0===this.state.resizeProportional?this.setState({resizeWidth:parseInt(t.target.value),resizeHeight:parseInt(t.target.value)/n}):this.setState({resizeWidth:parseInt(t.target.value)}):!0===this.state.resizeProportional?this.setState({resizeWidth:parseInt(t.target.value)*n,resizeHeight:parseInt(t.target.value)}):this.setState({resizeHeight:parseInt(t.target.value)})}},{key:"getResizeInfo",value:function(){var e=this.editor.bg_info;this.setState({resizeHeight:parseInt(e.height),resizeWidth:parseInt(e.width)})}},{key:"handleFileInputChange",value:function(e){var t=e.target.files[0],n=URL.createObjectURL(t);this.insertImage(n)}},{key:"editor_style_callback",value:function(e,t){var n=this.getQueryVariable("mark");if("selected"==e){if(t){var o="";switch(t.shape){case 1:o="curve";break;case 3:o="rect";break;case 4:o="ellipse";break;case 7:o="callout";break;case 30:o="image";break;case 8:o="list";break;case 23:case 20:case 2:o="line_arrow";break;case 5:o="rect_blur";break;case 80:o="text"}this.setState({currentShape:o})}else this.setState({currentShape:""});if(this.state.changeShape)return void this.setState({changeShape:!1})}window.parent.postMessage({type:e,mark:n,data:t},"*")}},{key:"getQueryVariable",value:function(e){var t=new URLSearchParams(window.location.search).get(e);return t||!1}},{key:"initEditor",value:function(e){if(e){this.container.current.style.position="absolute",this.container.current.style.setProperty("top",this.getQueryVariable("ct")+"px","important"),this.container.current.style.left=this.getQueryVariable("cl")+"px";var t=this,n=new Image;this.editor=new l.Z({out_container:this.outerContainer.current,container:this.container.current,doodle_canvas:this.doodleCanvas.current,layer_canvas:this.layerCanvas.current,textarea:this.textarea.current,textarea_out:this.textareaOut.current,$list_dialog:this.listDialog.current,image:n},(function(e,n){t.editor_style_callback(e,n)})),n.src=e,n.onload=function(){t.editor.setBgImage(n,!1),t.editor.setPenColor(t.state.currentColor),t.state.currentTool.length>0&&t.editor.setPenType(t.state.currentTool),t.editor.setFontSize(t.state.currentFontSize),t.editor.setPenWidth(t.state.currentPenWidth),t.editor.setFontName(t.state.currentFontFamily),t.editor.setBlurRadius(30),t.setState({isReady:!0})}}}},{key:"insertImage",value:function(e){var t=this,n=new Image;n.src=e;var o={image:n,width:0,height:0,choose_type:"full"};n.img_info=o,n.onload=function(){o.width=this.naturalWidth,o.height=this.naturalHeight,t.editor.insertSvgImage(o)}}},{key:"handleToolBarBtnClick",value:function(e,t){var n=this.editor;if("shape"===e){if(-1!==c.indexOf(t)&&!this.props.permissions.allowAdvancedToolForImageEditor)return void this.setState({upgradeType:t,isShownUpgrade:!0});"highlight"==t?(n.unSelectAll(),n.setPenOpacity(.3),n.setPenWidth(16),n.setPenType("highlight")):(n.setPenOpacity(1),n.setPenWidth(this.state.currentPenWidth),n.setPenType(t)),this.setState({currentTool:t})}else if("action"===e)switch(t.actionType){case"crop":this.setState({isInCropMode:!0}),n.cutImage();break;case"changeColor":this.setState({currentColor:t.value}),n.setPenColor(t.value),localStorage["pen-color"]=t.value;break;case"changePenWidth":this.setState({currentPenWidth:t.value}),n.setPenWidth(parseInt(t.value)),localStorage["pen-width"]=t.value;break;case"changeFontSize":this.setState({currentFontSize:t.value}),n.setFontSize(parseInt(t.value)),localStorage["font-size"]=t.value;break;case"changeFontFamily":this.setState({currentFontFamily:t.value}),n.setFontName(t.value),localStorage["font-family"]=t.value;break;case"zoom-in":if(2!==this.state.currentScale){var o=this.state.currentScale+.25;n.setScale(o),this.setState({currentScale:o,isShowScaleTip:!0})}break;case"zoom-out":.25!==this.state.currentScale&&(o=this.state.currentScale-.25,n.setScale(o),this.setState({currentScale:o,isShowScaleTip:!0}));break;case"resetScale":n.setScale(1),this.setState({currentScale:1,isShowScaleTip:!1});break;case"crop-demension-width":this.setState({cropWidth:parseInt(t.value)},(function(){n.setCropSize(this.state.cropWidth,this.state.cropHeight)}));break;case"crop-demension-height":this.setState({cropHeight:parseInt(t.value)},(function(){n.setCropSize(this.state.cropWidth,this.state.cropHeight)}));break;case"leaveCrop":this.setState({isInCropMode:!1,cropWidth:0,cropHeight:0}),n.finishCutImage(!1);break;case"doCrop":n.finishCutImage(!0),this.setState({isInCropMode:!1,cropWidth:0,cropHeight:0});break;case"insert-image":if(!this.props.permissions.allowAdvancedToolForImageEditor)return void this.setState({upgradeType:"insertImage",isShownUpgrade:!0});this.fileInput.current.click();break;case"doInsertImage":if(!this.props.permissions.allowAdvancedToolForImageEditor)return void this.setState({upgradeType:"image",isShownUpgrade:!0});var r="./images/svg/"+t.value+".svg";this.insertImage(r);break;case"doResize":n.setImageSize(this.state.resizeWidth,this.state.resizeHeight);break;default:n[t.actionType]()}}},{key:"render",value:function(){var e=this.state,t=e.isShownUpgrade,n=(e.isReady,a()("editor",this.props.className));return(0,u.jsxs)("div",{className:n,tabIndex:"0",children:[(0,u.jsx)("input",{type:"file",className:"file-input",ref:this.fileInput,accept:".jpg,.jpeg,.png",onChange:this.handleFileInputChange}),(0,u.jsx)("div",{className:"editor-outer-container",tabIndex:"0",id:"editor-outer-container",ref:this.outerContainer,children:(0,u.jsxs)("div",{className:"editor-container",ref:this.container,children:[(0,u.jsx)("canvas",{className:"doodle-canvas",id:"canvas",ref:this.doodleCanvas}),(0,u.jsx)("canvas",{className:"layer-canvas",id:"canvas2",ref:this.layerCanvas}),(0,u.jsx)("div",{className:"editor-outer-textarea",ref:this.textareaOut,children:(0,u.jsx)("textarea",{className:"editor-textarea",ref:this.textarea})}),(0,u.jsxs)("div",{className:"editor-list-dialog",ref:this.listDialog,children:["Number:",(0,u.jsx)("input",{type:"number"})]})]})}),(0,u.jsx)(s.Z,{visible:t,onCancel:this.handleCloseUpgrade,type:this.state.upgradeType})]})}}],n&&h(t.prototype,n),r&&h(t,r),Object.defineProperty(t,"prototype",{writable:!1}),d}(o.PureComponent);const b=m;n(31795);function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function S(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function w(e,t){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},w(e,t)}function Z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=C(e);if(t){var r=C(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return P(this,n)}}function P(e,t){if(t&&("object"===v(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return k(e)}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e){return C=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},C(e)}var O=chrome.extension.getBackgroundPage(),T=function(e){return"jpg"===e?"image/jpeg":"image/png"},j=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&w(e,t)}(i,e);var t,n,o,r=Z(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=r.call(this,e)).onRef=function(e){t.child=e},t.state={annotateImageUrl:"",saveImageUrl:"",imageBlob:null,contentType:"image/png",permissions:{},step:"edit"},t.handleImageBlob=t.handleImageBlob.bind(k(t)),t.initEditor=t.initEditor.bind(k(t)),t.getQueryVariable=t.getQueryVariable.bind(k(t)),t.handleDrawStyleAction=t.handleDrawStyleAction,t}return t=i,(n=[{key:"handleDrawStyleAction",value:function(e){this.child.handleDrawStyle(e)}},{key:"initEditor",value:function(e){if(e){var t={annotateImageUrl:e};this.setState(t)}}},{key:"componentDidMount",value:function(){var e=this;window.addEventListener("message",(function(t){"init"==t.data.type?e.initEditor(t.data.dataUrl):e.handleDrawStyleAction(t.data.data)}));var t=this.getQueryVariable("mark");window.parent.postMessage({type:"initIframe",mark:t},"*")}},{key:"componentWillUnmount",value:function(){document.removeEventListener("visibilitychange",(function(){})),window.removeEventListener("message")}},{key:"handleImageBlob",value:function(e,t){var n=this.getQueryVariable("mark");if("copy"===e)window.parent.postMessage({type:"copy",mark:n,data:t},"*");else if("save"===e){var o=this.getQueryVariable("incognito"),r=this.getQueryVariable("actionType");"true"==o?chrome.runtime.sendMessage({action:"saveImage",data:t,actionType:r,format:T(this.getQueryVariable("format"))},(function(){chrome.runtime.lastError})):O?O.saveAnnotatedImage(t,!0,r,T(this.getQueryVariable("format"))):chrome.runtime.sendMessage({action:"saveImage",data:window.URL.createObjectURL(t),actionType:r,format:T(this.getQueryVariable("format"))},(function(){chrome.runtime.lastError}))}}},{key:"getQueryVariable",value:function(e){for(var t=window.location.search.substring(1).split("&"),n=0;n<t.length;n++){var o=t[n].split("=");if(o[0]==e)return o[1]}return!1}},{key:"render",value:function(){var e=a()("sub-page",{active:"edit"===this.state.step});return this.state.saveImageUrl||this.state.annotateImageUrl?(0,u.jsx)(b,{imageUrl:this.state.annotateImageUrl,handleFinishEdit:this.handleImageBlob,permissions:this.state.permissions,className:e,type:"ext",contentType:T(this.getQueryVariable("format")),onRef:this.onRef}):(0,u.jsx)("div",{className:"loading-page",children:(0,u.jsx)("div",{className:"center"})})}}])&&S(t.prototype,n),o&&S(t,o),Object.defineProperty(t,"prototype",{writable:!1}),i}(o.Component);r.render((0,u.jsx)(j,{}),document.getElementById("edit-page"))}},r={};function i(e){var t=r[e];if(void 0!==t)return t.exports;var n=r[e]={id:e,loaded:!1,exports:{}};return o[e].call(n.exports,n,n.exports,i),n.loaded=!0,n.exports}i.m=o,e=[],i.O=(t,n,o,r)=>{if(!n){var a=1/0;for(u=0;u<e.length;u++){for(var[n,o,r]=e[u],c=!0,s=0;s<n.length;s++)(!1&r||a>=r)&&Object.keys(i.O).every((e=>i.O[e](n[s])))?n.splice(s--,1):(c=!1,r<a&&(a=r));if(c){e.splice(u--,1);var l=o();void 0!==l&&(t=l)}}return t}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[n,o,r]},i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},n=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,i.t=function(e,o){if(1&o&&(e=this(e)),8&o)return e;if("object"==typeof e&&e){if(4&o&&e.__esModule)return e;if(16&o&&"function"==typeof e.then)return e}var r=Object.create(null);i.r(r);var a={};t=t||[null,n({}),n([]),n(n)];for(var c=2&o&&e;"object"==typeof c&&!~t.indexOf(c);c=n(c))Object.getOwnPropertyNames(c).forEach((t=>a[t]=()=>e[t]));return a.default=()=>e,i.d(r,a),r},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e;i.g.importScripts&&(e=i.g.location+"");var t=i.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");n.length&&(e=n[n.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),i.p=e+"../../"})(),(()=>{var e={512:0};i.O.j=t=>0===e[t];var t=(t,n)=>{var o,r,[a,c,s]=n,l=0;if(a.some((t=>0!==e[t]))){for(o in c)i.o(c,o)&&(i.m[o]=c[o]);if(s)var u=s(i)}for(t&&t(n);l<a.length;l++)r=a[l],i.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return i.O(u)},n=self.webpackChunkawesomescreenshot_front=self.webpackChunkawesomescreenshot_front||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),i.O(void 0,[714,769,469,231,76,233,699],(()=>i(33505)));var a=i.O(void 0,[714,769,469,231,76,233,699],(()=>i(45632)));a=i.O(a)})();